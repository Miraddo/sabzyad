<header class="site-header">
  <nav class="navbar container" role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
      <a class="navbar-item brand-logo" href="{{ .Site.BaseURL }}" aria-label="{{ .Site.Title }}">
        {{ $logo := .Site.Params.logo }}
        {{ $logoExists := and $logo (fileExists (printf "static%s" $logo)) }}
        {{ if $logoExists }}
          <img src="{{ $logo }}" alt="{{ .Site.Title }}" class="brand-image">
        {{ else }}
          {{ $emoji := or .Site.Params.logoEmoji "ðŸŒ±" }}
          <div class="brand-content" data-placeholder-logo>
            <span class="brand-icon" aria-hidden="true">{{ $emoji }}</span>
            <span class="brand-text">{{ .Site.Title }}</span>
          </div>
        {{ end }}
      </a>
      
      <button role="button" class="navbar-burger" aria-label="menu" aria-expanded="false" data-target="navbarBasic">
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </button>
    </div>

    <div id="navbarBasic" class="navbar-menu">
      <div class="navbar-start">
        {{ $current := . }}
        {{ range .Site.Menus.main }}
          {{/* Determine active: exact match OR (current path starts with menu URL and menu URL != '/') */}}
          {{ $u := .URL }}
          {{ $isExact := eq $u $current.RelPermalink }}
          {{ $isSection := and (ne $u "/") (hasPrefix $current.RelPermalink $u) }}
          {{ $active := or $isExact $isSection }}
          <a class="navbar-item{{ if $active }} is-active{{ end }}" href="{{ .URL }}" aria-current="{{ if $active }}page{{ end }}">
            <span class="menu-text">{{ .Name }}</span>
          </a>
        {{ end }}
      </div>

      <div class="navbar-end">
        <div class="navbar-item">
          <div class="navbar-actions">
            <button class="action-btn theme-toggle" id="themeToggle" aria-label="ØªØºÛŒÛŒØ± ØªÙ…" title="ØªØºÛŒÛŒØ± ØªÙ…">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="icon-moon">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
              </svg>
            </button>
            <a class="action-btn search-btn" href="#" data-search-open aria-label="Ø¬Ø³ØªØ¬Ùˆ" title="Ø¬Ø³ØªØ¬Ùˆ">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="8"></circle>
                <path d="m21 21-4.35-4.35"></path>
              </svg>
            </a>
            <a class="btn btn-primary" href="{{ "/courses/" | relLangURL }}">
              <span>Ø´Ø±ÙˆØ¹ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ</span>
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M5 12h14M12 5l7 7-7 7"></path>
              </svg>
            </a>
          </div>
        </div>
      </div>
    </div>
  </nav>
</header>
